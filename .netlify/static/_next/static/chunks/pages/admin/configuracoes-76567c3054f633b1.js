(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8664],{5315:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/configuracoes",function(){return a(9590)}])},8264:function(e,t,a){"use strict";a.d(t,{Z:function(){return d}});var r=a(5893),o=a(1163),n=a(7294),i=a(2874),c=a(7182),s=a(3490),l=a(4178);function d(e){let{children:t}=e,{user:a,isAuthenticated:d,isLoading:u}=(0,i.aC)(),h=(0,o.useRouter)(),[p,m]=(0,n.useState)(!0);return((0,n.useEffect)(()=>{if(!u){if(!d){console.log("[AdminRoute] Usu\xe1rio n\xe3o autenticado, redirecionando para login..."),h.push("/login");return}if(a&&a.tipo!==l.W.ADMIN){console.log("[AdminRoute] Acesso negado: usu\xe1rio n\xe3o \xe9 administrador"),h.push("/acesso-negado");return}m(!1)}},[u,d,a,h]),u||p)?(0,r.jsx)(s.Z,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",children:(0,r.jsx)(c.Z,{})}):d&&(null==a?void 0:a.tipo)===l.W.ADMIN?(0,r.jsx)(r.Fragment,{children:t}):null}},8963:function(e,t,a){"use strict";var r=a(3077),o=a(5893);t.Z=(0,r.Z)((0,o.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save")},9437:function(e,t,a){"use strict";a.d(t,{Z:function(){return S}});var r=a(3366),o=a(7462),n=a(7294),i=a(512),c=a(4780),s=a(2456),l=a(6643),d=a(7486),u=a(7527),h=a(4001),p=a(1588),m=a(4867);function g(e){return(0,m.ZP)("MuiSwitch",e)}let v=(0,p.Z)("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]);var f=a(5893);let x=["className","color","edge","size","sx"],b=e=>{let{classes:t,edge:a,size:r,color:n,checked:i,disabled:s}=e,d={root:["root",a&&"edge".concat((0,l.Z)(a)),"size".concat((0,l.Z)(r))],switchBase:["switchBase","color".concat((0,l.Z)(n)),i&&"checked",s&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},u=(0,c.Z)(d,g,t);return(0,o.Z)({},t,u)},Z=(0,u.ZP)("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,a.edge&&t["edge".concat((0,l.Z)(a.edge))],t["size".concat((0,l.Z)(a.size))]]}})({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,["& .".concat(v.thumb)]:{width:16,height:16},["& .".concat(v.switchBase)]:{padding:4,["&.".concat(v.checked)]:{transform:"translateX(16px)"}}}}]}),y=(0,u.ZP)(d.Z,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.switchBase,{["& .".concat(v.input)]:t.input},"default"!==a.color&&t["color".concat((0,l.Z)(a.color))]]}})(e=>{let{theme:t}=e;return{position:"absolute",top:0,left:0,zIndex:1,color:t.vars?t.vars.palette.Switch.defaultColor:"".concat("light"===t.palette.mode?t.palette.common.white:t.palette.grey[300]),transition:t.transitions.create(["left","transform"],{duration:t.transitions.duration.shortest}),["&.".concat(v.checked)]:{transform:"translateX(20px)"},["&.".concat(v.disabled)]:{color:t.vars?t.vars.palette.Switch.defaultDisabledColor:"".concat("light"===t.palette.mode?t.palette.grey[100]:t.palette.grey[600])},["&.".concat(v.checked," + .").concat(v.track)]:{opacity:.5},["&.".concat(v.disabled," + .").concat(v.track)]:{opacity:t.vars?t.vars.opacity.switchTrackDisabled:"".concat("light"===t.palette.mode?.12:.2)},["& .".concat(v.input)]:{left:"-100%",width:"300%"}}},e=>{let{theme:t}=e;return{"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.activeChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,s.Fq)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(t.palette).filter(e=>{let[,t]=e;return t.main&&t.light}).map(e=>{let[a]=e;return{props:{color:a},style:{["&.".concat(v.checked)]:{color:(t.vars||t).palette[a].main,"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[a].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,s.Fq)(t.palette[a].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(v.disabled)]:{color:t.vars?t.vars.palette.Switch["".concat(a,"DisabledColor")]:"".concat("light"===t.palette.mode?(0,s.$n)(t.palette[a].main,.62):(0,s._j)(t.palette[a].main,.55))}},["&.".concat(v.checked," + .").concat(v.track)]:{backgroundColor:(t.vars||t).palette[a].main}}}})]}}),j=(0,u.ZP)("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,t)=>t.track})(e=>{let{theme:t}=e;return{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:"".concat("light"===t.palette.mode?t.palette.common.black:t.palette.common.white),opacity:t.vars?t.vars.opacity.switchTrack:"".concat("light"===t.palette.mode?.38:.3)}}),w=(0,u.ZP)("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})(e=>{let{theme:t}=e;return{boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}});var S=n.forwardRef(function(e,t){let a=(0,h.i)({props:e,name:"MuiSwitch"}),{className:n,color:c="primary",edge:s=!1,size:l="medium",sx:d}=a,u=(0,r.Z)(a,x),p=(0,o.Z)({},a,{color:c,edge:s,size:l}),m=b(p),g=(0,f.jsx)(w,{className:m.thumb,ownerState:p});return(0,f.jsxs)(Z,{className:(0,i.Z)(m.root,n),sx:d,ownerState:p,children:[(0,f.jsx)(y,(0,o.Z)({type:"checkbox",icon:g,checkedIcon:g,ref:t,ownerState:p},u,{classes:(0,o.Z)({},m,{root:m.switchBase})})),(0,f.jsx)(j,{className:m.track,ownerState:p})]})})},9590:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return C}});var r=a(5893),o=a(7294),n=a(9678),i=a(9437),c=a(6897),s=a(8649),l=a(5083),d=a(5972),u=a(492),h=a(8426),p=a(7788),m=a(3490),g=a(7182),v=a(6788),f=a(8864),x=a(6912),b=a(4677),Z=a(4925),y=a(8963),j=a(2874),w=a(8264),S=a(3362);function k(){let{user:e}=(0,j.aC)(),[t,a]=(0,o.useState)([]),[w,k]=(0,o.useState)(!0),[C,E]=(0,o.useState)(!1),[z,N]=(0,o.useState)(null),[O,R]=(0,o.useState)({open:!1,message:"",severity:"success"});(0,o.useEffect)(()=>{_()},[]);let _=async()=>{try{k(!0);let e=await S.h.get("/api/admin/configuracoes");a(e.data)}catch(t){console.error("Erro ao carregar configura\xe7\xf5es:",t);let e=t instanceof Error?t.message:"Erro ao carregar configura\xe7\xf5es";N("Erro ao carregar configura\xe7\xf5es: ".concat(e))}finally{k(!1)}},M=(e,t)=>{a(a=>a.map(a=>a.id===e?{...a,valor:String(t)}:a))},B=(e,t)=>{let{value:a}=e.target;M(t,a)},A=(e,t)=>{let{checked:a}=e.target;M(t,String(a))},I=async e=>{e.preventDefault();try{E(!0);let e=t.map(e=>{let{id:t,valor:a}=e;return{id:t,valor:a}});await S.h.put("/api/admin/configuracoes",{configuracoes:e}),R({open:!0,message:"Configura\xe7\xf5es salvas com sucesso!",severity:"success"})}catch(e){console.error("Erro ao salvar configura\xe7\xf5es:",e),R({open:!0,message:e&&"object"==typeof e&&"response"in e&&e.response&&"object"==typeof e.response&&"data"in e.response&&e.response.data&&"object"==typeof e.response.data&&"message"in e.response.data?String(e.response.data.message):"Erro ao salvar configura\xe7\xf5es",severity:"error"})}finally{E(!1)}},D=()=>{R(e=>({...e,open:!1}))},P=e=>{switch(e.tipo){case"BOOLEANO":return(0,r.jsx)(n.Z,{control:(0,r.jsx)(i.Z,{checked:"true"===e.valor,onChange:t=>A(t,e.id),color:"primary"}),label:"true"===e.valor?"Ativado":"Desativado"});case"SELECAO":var t;return(0,r.jsxs)(c.Z,{fullWidth:!0,variant:"outlined",margin:"normal",children:[(0,r.jsx)(s.Z,{id:"".concat(e.id,"-label"),children:e.descricao}),(0,r.jsx)(l.Z,{labelId:"".concat(e.id,"-label"),value:e.valor,onChange:t=>B(t,e.id),label:e.descricao,children:null===(t=e.opcoes)||void 0===t?void 0:t.map(e=>(0,r.jsx)(d.Z,{value:e,children:e},e))})]});case"NUMERO":return(0,r.jsx)(u.Z,{fullWidth:!0,type:"number",margin:"normal",label:e.descricao,value:e.valor,onChange:t=>M(e.id,t.target.value),variant:"outlined"});default:return(0,r.jsx)(u.Z,{fullWidth:!0,margin:"normal",label:e.descricao,value:e.valor,onChange:t=>M(e.id,t.target.value),variant:"outlined",multiline:!0,rows:3})}};return z?(0,r.jsx)(h.Z,{maxWidth:"lg",sx:{mt:4,mb:4},children:(0,r.jsx)(p.Z,{severity:"error",children:z})}):w?(0,r.jsx)(m.Z,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",children:(0,r.jsx)(g.Z,{})}):(0,r.jsxs)(h.Z,{maxWidth:"lg",sx:{mt:4,mb:4},children:[(0,r.jsxs)(m.Z,{mb:4,children:[(0,r.jsx)(v.Z,{variant:"h4",component:"h1",gutterBottom:!0,children:"Configura\xe7\xf5es do Sistema"}),(0,r.jsx)(v.Z,{variant:"body1",color:"textSecondary",paragraph:!0,children:"Gerencie as configura\xe7\xf5es gerais do sistema."})]}),(0,r.jsxs)(f.Z,{component:"form",onSubmit:I,sx:{p:3},children:[t.map((e,a)=>(0,r.jsxs)(m.Z,{mb:4,children:[(0,r.jsx)(v.Z,{variant:"h6",gutterBottom:!0,children:e.chave}),(0,r.jsx)(v.Z,{variant:"body2",color:"textSecondary",paragraph:!0,children:e.descricao}),P(e),a<t.length-1&&(0,r.jsx)(x.Z,{sx:{my:3}})]},e.id)),(0,r.jsx)(m.Z,{display:"flex",justifyContent:"flex-end",mt:4,children:(0,r.jsx)(b.Z,{type:"submit",variant:"contained",color:"primary",startIcon:C?(0,r.jsx)(g.Z,{size:20,color:"inherit"}):(0,r.jsx)(y.Z,{}),disabled:C,children:C?"Salvando...":"Salvar Configura\xe7\xf5es"})})]}),(0,r.jsx)(Z.Z,{open:O.open,autoHideDuration:6e3,onClose:D,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,r.jsx)(p.Z,{onClose:D,severity:O.severity,sx:{width:"100%"},children:O.message})})]})}function C(){return(0,r.jsx)(w.Z,{children:(0,r.jsx)(k,{})})}}},function(e){e.O(0,[8426,492,6875,3766,2888,9774,179],function(){return e(e.s=5315)}),_N_E=e.O()}]);