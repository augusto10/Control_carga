(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6964],{4830:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return i(2705)}])},6490:function(e,n,i){"use strict";i.d(n,{Z:function(){return I}});var s=i(5893),t=i(7294),o=i(1163),r=i(8745),l=i(2635),a=i(8539),c=i(6788),d=i(2857),x=i(6912),h=i(7407),u=i(9304),j=i(2311),m=i(7638),p=i(2200),Z=i(3490),g=i(6795),f=i(8690),v=i(5895),b=i(5076),w=i(5972),y=i(7958),C=i(190),k=i(3246),P=i(8155),A=i(6117),S=i(5854),_=i(9021),E=i(3905),z=i(899),N=i(237),U=i(1897),M=i(2874);function I(e){var n;let{children:i,title:I}=e,{user:T,logout:D}=(0,M.aC)(),R=(0,o.useRouter)(),G=(0,r.Z)(),O=(0,l.Z)(G.breakpoints.down("md")),[W,F]=(0,t.useState)(!1),[H,X]=(0,t.useState)(null),B=!!H,L=[{text:"Dashboard",icon:(0,s.jsx)(C.Z,{}),path:"/admin"},{text:"Usu\xe1rios",icon:(0,s.jsx)(k.Z,{}),path:"/admin/usuarios"},{text:"Motoristas",icon:(0,s.jsx)(P.Z,{}),path:"/admin/motoristas"},{text:"Controles",icon:(0,s.jsx)(A.Z,{}),path:"/admin/controles"},{text:"Configura\xe7\xf5es",icon:(0,s.jsx)(S.Z,{}),path:"/admin/configuracoes"}],V=()=>{F(!W)},Y=()=>{X(null)},q=(0,s.jsxs)("div",{children:[(0,s.jsxs)(a.Z,{children:[(0,s.jsx)(c.Z,{variant:"h6",noWrap:!0,component:"div",sx:{flexGrow:1},children:"Painel Admin"}),(0,s.jsx)(d.Z,{onClick:V,children:"rtl"===G.direction?(0,s.jsx)(_.Z,{}):(0,s.jsx)(E.Z,{})})]}),(0,s.jsx)(x.Z,{}),(0,s.jsx)(h.Z,{children:L.map(e=>(0,s.jsx)(u.ZP,{disablePadding:!0,onClick:()=>{R.push(e.path),O&&F(!1)},children:(0,s.jsxs)(j.Z,{selected:R.pathname===e.path,children:[(0,s.jsx)(m.Z,{children:e.icon}),(0,s.jsx)(p.Z,{primary:e.text})]})},e.text))})]});return(0,s.jsxs)(Z.Z,{sx:{display:"flex"},children:[(0,s.jsx)(g.Z,{position:"fixed",sx:{width:{sm:"calc(100% - ".concat(240,"px)")},ml:{sm:"".concat(240,"px")}},children:(0,s.jsxs)(a.Z,{children:[(0,s.jsx)(d.Z,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:V,sx:{mr:2,display:{sm:"none"}},children:(0,s.jsx)(z.Z,{})}),(0,s.jsx)(c.Z,{variant:"h6",noWrap:!0,component:"div",sx:{flexGrow:1},children:I}),(0,s.jsxs)(Z.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,s.jsx)(c.Z,{variant:"body2",sx:{mr:2,display:{xs:"none",sm:"block"}},children:null==T?void 0:T.nome}),(0,s.jsx)(f.Z,{title:"Configura\xe7\xf5es da conta",children:(0,s.jsx)(d.Z,{onClick:e=>{X(e.currentTarget)},size:"small",sx:{ml:2},"aria-controls":B?"account-menu":void 0,"aria-haspopup":"true","aria-expanded":B?"true":void 0,children:(0,s.jsx)(v.Z,{sx:{width:32,height:32},children:(null==T?void 0:null===(n=T.nome)||void 0===n?void 0:n.charAt(0))||(0,s.jsx)(N.Z,{})})})})]})]})}),(0,s.jsxs)(b.Z,{anchorEl:H,id:"account-menu",open:B,onClose:Y,onClick:Y,PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"& .MuiAvatar-root":{width:32,height:32,ml:-.5,mr:1},"&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[(0,s.jsxs)(w.Z,{onClick:()=>{Y(),R.push("/admin/perfil")},children:[(0,s.jsx)(m.Z,{children:(0,s.jsx)(N.Z,{fontSize:"small"})}),"Perfil"]}),(0,s.jsx)(x.Z,{}),(0,s.jsxs)(w.Z,{onClick:()=>{Y(),D(),R.push("/login")},children:[(0,s.jsx)(m.Z,{children:(0,s.jsx)(U.Z,{fontSize:"small"})}),"Sair"]})]}),(0,s.jsxs)(Z.Z,{component:"nav",sx:{width:{sm:240},flexShrink:{sm:0}},"aria-label":"mailbox folders",children:[(0,s.jsx)(y.ZP,{variant:"temporary",open:W,onClose:V,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",sm:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:240}},children:q}),(0,s.jsx)(y.ZP,{variant:"permanent",sx:{display:{xs:"none",sm:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:240}},open:!0,children:q})]}),(0,s.jsx)(Z.Z,{component:"main",sx:{flexGrow:1,p:3,width:{sm:"calc(100% - ".concat(240,"px)")},marginTop:"64px",minHeight:"calc(100vh - 64px)",backgroundColor:G.palette.background.default},children:i})]})}},8264:function(e,n,i){"use strict";i.d(n,{Z:function(){return d}});var s=i(5893),t=i(1163),o=i(7294),r=i(2874),l=i(7182),a=i(3490),c=i(4178);function d(e){let{children:n}=e,{user:i,isAuthenticated:d,isLoading:x}=(0,r.aC)(),h=(0,t.useRouter)(),[u,j]=(0,o.useState)(!0);return((0,o.useEffect)(()=>{if(!x){if(!d){console.log("[AdminRoute] Usu\xe1rio n\xe3o autenticado, redirecionando para login..."),h.push("/login");return}if(i&&i.tipo!==c.W.ADMIN){console.log("[AdminRoute] Acesso negado: usu\xe1rio n\xe3o \xe9 administrador"),h.push("/acesso-negado");return}j(!1)}},[x,d,i,h]),x||u)?(0,s.jsx)(a.Z,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",children:(0,s.jsx)(l.Z,{})}):d&&(null==i?void 0:i.tipo)===c.W.ADMIN?(0,s.jsx)(s.Fragment,{children:n}):null}},2705:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return _}});var s=i(5893),t=i(7294),o=i(8745),r=i(762),l=i(1919),a=i(3490),c=i(4715),d=i(6788),x=i(5895),h=i(8573),u=i(8864),j=i(2857),m=i(6912),p=i(7407),Z=i(9304),g=i(7590),f=i(2200),v=i(3246),b=i(9203),w=i(6117),y=i(2993),C=i(3947),k=i(6490),P=i(8264),A=i(3362);function S(){let[e,n]=(0,t.useState)(null),[i,P]=(0,t.useState)(!0);(0,o.Z)();let S=async()=>{try{P(!0);let e=await A.h.get("/api/admin/dashboard");n(e.data)}catch(e){console.error("Erro ao carregar estat\xedsticas:",e)}finally{P(!1)}};(0,t.useEffect)(()=>{S()},[]);let _=e=>{let{title:n,value:i,icon:t,color:o="primary",loading:h}=e;return(0,s.jsx)(r.Z,{children:(0,s.jsx)(l.Z,{children:h?(0,s.jsx)(a.Z,{sx:{width:"100%"},children:(0,s.jsx)(c.Z,{})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(a.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,s.jsx)(d.Z,{color:"textSecondary",gutterBottom:!0,children:n}),(0,s.jsx)(x.Z,{sx:{backgroundColor:"".concat(o,".light"),color:"".concat(o,".contrastText"),width:48,height:48},children:t})]}),(0,s.jsx)(d.Z,{variant:"h4",component:"div",children:i})]})})})};return(0,s.jsx)(k.Z,{title:"Vis\xe3o Geral",children:(0,s.jsxs)(h.ZP,{container:!0,spacing:3,children:[(0,s.jsx)(h.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,s.jsx)(_,{title:"Total de Usu\xe1rios",value:(null==e?void 0:e.totalUsuarios)||0,icon:(0,s.jsx)(v.Z,{}),color:"primary",loading:i})}),(0,s.jsx)(h.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,s.jsx)(_,{title:"Usu\xe1rios Ativos",value:(null==e?void 0:e.usuariosAtivos)||0,icon:(0,s.jsx)(b.Z,{}),color:"success",loading:i})}),(0,s.jsx)(h.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,s.jsx)(_,{title:"Controles Totais",value:(null==e?void 0:e.totalControles)||0,icon:(0,s.jsx)(w.Z,{}),color:"info",loading:i})}),(0,s.jsx)(h.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,s.jsx)(_,{title:"Controles Pendentes",value:(null==e?void 0:e.controlesPendentes)||0,icon:(0,s.jsx)(y.Z,{}),color:"warning",loading:i})}),(0,s.jsx)(h.ZP,{item:!0,xs:12,md:6,children:(0,s.jsxs)(u.Z,{children:[(0,s.jsxs)(a.Z,{p:2,display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,s.jsx)(d.Z,{variant:"h6",children:"\xdaltimos Usu\xe1rios"}),(0,s.jsx)(j.Z,{size:"small",onClick:S,disabled:i,children:(0,s.jsx)(C.Z,{})})]}),(0,s.jsx)(m.Z,{}),i?(0,s.jsx)(a.Z,{p:2,children:(0,s.jsx)(c.Z,{})}):(0,s.jsx)(p.Z,{children:(null==e?void 0:e.ultimosUsuarios.length)?e.ultimosUsuarios.map(e=>(0,s.jsxs)("div",{children:[(0,s.jsxs)(Z.ZP,{children:[(0,s.jsx)(g.Z,{children:(0,s.jsx)(x.Z,{children:e.nome.charAt(0).toUpperCase()})}),(0,s.jsx)(f.Z,{primary:e.nome,secondary:"\xdaltimo acesso: ".concat(e.ultimoAcesso?new Date(e.ultimoAcesso).toLocaleString():"Nunca acessou")})]}),(0,s.jsx)(m.Z,{variant:"inset",component:"li"})]},e.id)):(0,s.jsx)(a.Z,{p:2,textAlign:"center",children:(0,s.jsx)(d.Z,{color:"textSecondary",children:"Nenhum usu\xe1rio encontrado"})})})]})}),(0,s.jsx)(h.ZP,{item:!0,xs:12,md:6,children:(0,s.jsxs)(u.Z,{children:[(0,s.jsx)(a.Z,{p:2,children:(0,s.jsx)(d.Z,{variant:"h6",children:"Atividades Recentes"})}),(0,s.jsx)(m.Z,{}),(0,s.jsx)(a.Z,{p:2,children:(0,s.jsx)(d.Z,{color:"textSecondary",align:"center",sx:{my:4},children:"Em breve: Atividades recentes do sistema"})})]})})]})})}function _(){return(0,s.jsx)(P.Z,{children:(0,s.jsx)(S,{})})}}},function(e){e.O(0,[8690,8573,6861,2888,9774,179],function(){return e(e.s=4830)}),_N_E=e.O()}]);