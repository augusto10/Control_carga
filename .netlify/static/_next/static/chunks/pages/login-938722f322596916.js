(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3459],{3236:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return r(7351)}])},7351:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return U}});var o=r(5893),t=r(7294),i=r(1163),a=r(2874),s=r(3490),l=r(7182),c=r(8426),u=r(6788),d=r(8864),h=r(7788),m=r(492),x=r(5611),p=r(2857),f=r(4677),g=r(3366),v=r(7462),b=r(512),Z=r(4780),y=r(6643),j=r(7527),C=r(4001),w=r(9310),k=r(9168),D=r(1588),_=r(4867);function E(e){return(0,_.ZP)("MuiLink",e)}let A=(0,D.Z)("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]);var S=r(8478),W=r(2456);let N={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},F=e=>N[e]||e;var L=e=>{let{theme:n,ownerState:r}=e,o=F(r.color),t=(0,S.DW)(n,"palette.".concat(o),!1)||r.color,i=(0,S.DW)(n,"palette.".concat(o,"Channel"));return"vars"in n&&i?"rgba(".concat(i," / 0.4)"):(0,W.Fq)(t,.4)};let P=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],q=e=>{let{classes:n,component:r,focusVisible:o,underline:t}=e,i={root:["root","underline".concat((0,y.Z)(t)),"button"===r&&"button",o&&"focusVisible"]};return(0,Z.Z)(i,E,n)},M=(0,j.ZP)(u.Z,{name:"MuiLink",slot:"Root",overridesResolver:(e,n)=>{let{ownerState:r}=e;return[n.root,n["underline".concat((0,y.Z)(r.underline))],"button"===r.component&&n.button]}})(e=>{let{theme:n,ownerState:r}=e;return(0,v.Z)({},"none"===r.underline&&{textDecoration:"none"},"hover"===r.underline&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},"always"===r.underline&&(0,v.Z)({textDecoration:"underline"},"inherit"!==r.color&&{textDecorationColor:L({theme:n,ownerState:r})},{"&:hover":{textDecorationColor:"inherit"}}),"button"===r.component&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(A.focusVisible)]:{outline:"auto"}})}),R=t.forwardRef(function(e,n){let r=(0,C.i)({props:e,name:"MuiLink"}),{className:i,color:a="primary",component:s="a",onBlur:l,onFocus:c,TypographyClasses:u,underline:d="always",variant:h="inherit",sx:m}=r,x=(0,g.Z)(r,P),{isFocusVisibleRef:p,onBlur:f,onFocus:Z,ref:y}=(0,w.Z)(),[j,D]=t.useState(!1),_=(0,k.Z)(n,y),E=(0,v.Z)({},r,{color:a,component:s,focusVisible:j,underline:d,variant:h}),A=q(E);return(0,o.jsx)(M,(0,v.Z)({color:a,className:(0,b.Z)(A.root,i),classes:u,component:s,onBlur:e=>{f(e),!1===p.current&&D(!1),l&&l(e)},onFocus:e=>{Z(e),!0===p.current&&D(!0),c&&c(e)},ref:_,ownerState:E,variant:h,sx:[...Object.keys(N).includes(a)?[]:[{color:a}],...Array.isArray(m)?m:[m]]},x))});var T=r(9496),V=r(7698),z=r(9122),I=r(9008),B=r.n(I),O=r(1664),H=r.n(O);function U(){let[e,n]=(0,t.useState)(!1),[r,g]=(0,t.useState)({email:"",senha:""}),[v,b]=(0,t.useState)(null),{enqueueSnackbar:Z}=(0,T.Ds)(),{login:y,isLoading:j,isAuthenticated:C}=(0,a.aC)(),w=(0,i.useRouter)();if((0,t.useEffect)(()=>{C&&w.push("/")},[C,w]),j)return(0,o.jsx)(s.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,o.jsx)(l.Z,{})});let k=e=>{let{name:n,value:r}=e.target;g(e=>({...e,[n]:r}))},D=async e=>{e.preventDefault(),b(null),console.log("Iniciando tentativa de login..."),console.log("Dados do formul\xe1rio:",r);try{console.log("Chamando a fun\xe7\xe3o login..."),await y(r),Z("Login efetuado com sucesso!",{variant:"success"})}catch(i){var n,o;console.error("Erro durante o login:",i);let e=(null===(o=i.response)||void 0===o?void 0:null===(n=o.data)||void 0===n?void 0:n.message)||i.message||"Erro ao fazer login. Verifique suas credenciais.",r=e,t=e.toLowerCase();t.includes("n\xe3o encontrado")?r="Usu\xe1rio n\xe3o existe. Por favor, cadastre-se.":(t.includes("senha")||t.includes("credenciais")||t.includes("incorreta")||t.includes("invalid"))&&(r="Usu\xe1rio ou senha inv\xe1lida."),Z(r,{variant:"error"}),b(r)}};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(B(),{children:(0,o.jsx)("title",{children:"Login | Controle de Carga"})}),(0,o.jsx)(c.Z,{component:"main",maxWidth:"xs",children:(0,o.jsxs)(s.Z,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,o.jsx)(u.Z,{component:"h1",variant:"h4",sx:{mb:3,fontWeight:"bold"},children:"Controle de Carga"}),(0,o.jsxs)(d.Z,{elevation:3,sx:{p:4,width:"100%"},children:[(0,o.jsx)(u.Z,{component:"h2",variant:"h5",align:"center",sx:{mb:3},children:"Acessar Conta"}),v&&(0,o.jsx)(h.Z,{severity:"error",sx:{mb:3},children:v}),(0,o.jsxs)(s.Z,{component:"form",onSubmit:D,noValidate:!0,children:[(0,o.jsx)(m.Z,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"E-mail",name:"email",autoComplete:"email",autoFocus:!0,value:r.email,onChange:k,disabled:j}),(0,o.jsx)(m.Z,{margin:"normal",required:!0,fullWidth:!0,name:"senha",label:"Senha",type:e?"text":"password",id:"senha",autoComplete:"current-password",value:r.senha,onChange:k,disabled:j,InputProps:{endAdornment:(0,o.jsx)(x.Z,{position:"end",children:(0,o.jsx)(p.Z,{"aria-label":"toggle password visibility",onClick:()=>{n(!e)},edge:"end",children:e?(0,o.jsx)(V.Z,{}):(0,o.jsx)(z.Z,{})})})}}),(0,o.jsx)(f.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2,py:1.5},disabled:j,children:j?(0,o.jsx)(l.Z,{size:24,color:"inherit"}):"Entrar"}),(0,o.jsx)(s.Z,{sx:{textAlign:"center",mt:2},children:(0,o.jsx)(R,{component:H(),href:"/esqueci-senha",variant:"body2",children:"Esqueceu sua senha?"})})]})]}),(0,o.jsx)(s.Z,{sx:{mt:3,textAlign:"center"},children:(0,o.jsxs)(u.Z,{variant:"body2",color:"text.secondary",children:["\xa9 ",new Date().getFullYear()," Controle de Carga"]})})]})})]})}},9008:function(e,n,r){e.exports=r(3867)}},function(e){e.O(0,[8426,492,6,2888,9774,179],function(){return e(e.s=3236)}),_N_E=e.O()}]);